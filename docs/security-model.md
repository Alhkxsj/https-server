1. 设计目标

本项目安全模型遵循以下原则：

本地优先

用户完全可控

不依赖第三方 CA

不引入复杂 PKI 体系



---

2. 信任模型

用户
 └─ 安装本地 CA（用户主动信任）
      └─ hserve（仅本地有效）

CA 只在本机生成

私钥不离开设备



---

3. 为什么使用自签 CA

原因：

Let’s Encrypt 不适合本地 / IP

Android 本地开发证书需求明确

自签 CA = 用户主动信任


这是 开发者工具，不是公网服务。


---

4. TLS 策略

TLS 最低版本：TLS 1.2

禁用不安全协议

证书有效期较长，减少重复操作


具体参数定义见：

internal/tls/policy.go


---

5. 不做的事情（刻意）

❌ 自动安装系统证书

❌ 绕过 Android 安全提示

❌ 后台常驻服务


用户必须明确知道自己在做什么。


---

四、适用场景总结

本地 HTTPS 开发测试

Android ↔ PC 文件共享

局域网设备访问


不适合：

公网部署

商业 HTTPS 服务



---

五、结束语

这是一个 为清楚的人准备的工具。

没有魔法

没有隐蔽行为

所有证书、信任都在你手里


如果你理解 HTTPS，那么你会喜欢它。